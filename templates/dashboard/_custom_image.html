{# templates/dashboard/_custom_image.html #}
{% load static %}

<div class="widget size-medium" data-widget-name="Image">
  <!-- 通常表示 -->
  <div class="widget-content">
    <section class="card custom-image-widget">
      <h2 class="custom-image__title">マイ画像</h2>
      <input type="file" accept="image/*" class="custom-image__input">
      <div class="custom-image__container">
        {% if image_url %}
          <img
            src="{{ image_url }}"
            class="custom-image__preview"
            alt="アップロードされた画像"
            onerror="this.style.display='none';this.insertAdjacentHTML('afterend','<span>画像が表示できません</span>');"
          >
        {% else %}
          <img
            src="{% static 'images/placeholder.png' %}"
            class="custom-image__preview"
            alt="画像のプレースホルダー"
            onerror="this.style.display='none';this.insertAdjacentHTML('afterend','<span>画像が表示できません</span>');"
          >
        {% endif %}
      </div>
    </section>
  </div>

  <!-- 編集モードオーバーレイ -->
  <div class="widget-edit-overlay">
    <span class="widget-name">Image</span>
    <button class="widget-delete" title="削除">🗑️</button>
  </div>
</div>
